<script setup>
import { ref, computed } from 'vue'

// --- Reactive State ---
const amount = ref(1) // Default amount
const fromCurrency = ref('USD') // Default from currency
const toCurrency = ref('EUR') // Default to currency

// --- Static Data ---
// NOTE: These are SAMPLE rates for demonstration purposes only.
// In a real app, you would fetch these from an API.
const exchangeRates = ref({
  USD: 1.0,   // Base Currency
  EUR: 0.92,  // 1 USD = 0.92 EUR
  GBP: 0.79,  // 1 USD = 0.79 GBP
  JPY: 150.5 // 1 USD = 150.5 JPY
  // Add more currencies and rates as needed
})

const currencies = computed(() => Object.keys(exchangeRates.value))

// --- Computed Property for Conversion ---
const convertedAmount = computed(() => {
  const inputAmount = parseFloat(amount.value)
  if (isNaN(inputAmount) || inputAmount <= 0) {
    return 0 // Return 0 if input is invalid or non-positive
  }

  const baseRate = exchangeRates.value[fromCurrency.value]
  const targetRate = exchangeRates.value[toCurrency.value]

  // Check if rates exist
  if (!baseRate || !targetRate) {
    console.error("Exchange rate not found for selected currency.")
    return 'Error' // Or handle appropriately
  }

  // Convert 'from' currency amount to base currency (USD)
  const amountInBase = inputAmount / baseRate

  // Convert base currency amount to 'to' currency
  const finalAmount = amountInBase * targetRate

  return finalAmount.toFixed(2) // Format to 2 decimal places
})

</script>

<template>
  <div>
    <h1>Simple Currency Converter</h1>

    <div>
      <label for="amount">Amount:</label>
      <input type="number" id="amount" v-model.number="amount" min="0" step="any">
    </div>

    <div>
      <label for="fromCurrency">From:</label>
      <select id="fromCurrency" v-model="fromCurrency">
        <option v-for="currency in currencies" :key="currency" :value="currency">
          {{ currency }}
        </option>
      </select>
    </div>

    <div>
      <label for="toCurrency">To:</label>
      <select id="toCurrency" v-model="toCurrency">
        <option v-for="currency in currencies" :key="currency" :value="currency">
          {{ currency }}
        </option>
      </select>
    </div>

    <div>
      <h2>Converted Amount:</h2>
      <p>
        {{ amount }} {{ fromCurrency }} = <strong>{{ convertedAmount }} {{ toCurrency }}</strong>
      </p>
    </div>

    <p style="font-size: 0.8em; color: grey;">
      Note: Uses sample exchange rates for demonstration.
    </p>
  </div>
</template>

<style scoped>
/* Basic Styling (optional, can be removed if using CSS framework later) */
div {
  margin-bottom: 10px;
  font-family: sans-serif;
}
label {
  margin-right: 5px;
  display: inline-block;
  width: 60px;
}
input, select {
  padding: 5px;
  margin-left: 10px;
}
h1, h2 {
    text-align: center;
}
p strong {
  font-size: 1.2em;
}
</style>
